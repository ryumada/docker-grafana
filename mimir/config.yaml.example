target: all

multitenancy_enabled: false

server:
  http_listen_port: 9009

memberlist:
  abort_if_cluster_join_fails: false
  join_members: []

distributor:
  ring:
    instance_addr: 0.0.0.0
    kvstore:
      store: memberlist

ingester:
  ring:
    instance_addr: 0.0.0.0
    kvstore:
      store: memberlist
    replication_factor: 1
  wal:
    enabled: true
    dir: /var/mimir/wal
  lifecycler:
    final_sleep: 0s

store_gateway:
  sharding_enabled: true

table_manager:
  retention_deletes_enabled: false

blocks_storage:
  backend: gcs
  gcs:
    bucket_name: ${MIMIR_BLOCKS_BUCKET}
  tsdb:
    dir: /var/mimir/tsdb
  bucket_store:
    sync_dir: /var/mimir/bucket-cache

ruler:
  alertmanager_url: http://alertmanager:9093
  rule_path: /var/mimir/rules
  ring:
    kvstore:
      store: memberlist
  enable_api: true

ruler_storage:
  backend: gcs
  gcs:
    bucket_name: ${MIMIR_RULER_BUCKET}
  cache:
    max_size_items: 1024

compactor:
  data_dir: /var/mimir/compactor
  sharding_enabled: true

temporal_store:
  max_look_back_period: 0s

overrides:
  metrics_queries_concurrency: 20
  ingestion_rate: 100000
  ingestion_burst_size: 200000

alertmanager:
  api:
    enable_v2: true
  enable_api: true
  external_url: http://alertmanager:9093
  storage:
    path: /var/mimir/alertmanager
